<?xml version="1.0" encoding="utf-8"?>
<saw:report xmlns:saw="com.siebel.analytics.web/report/v1.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlVersion="201201160" cacheControl="bypassCache" xmlns:sawx="com.siebel.analytics.web/expression/v1.1"><saw:criteria xsi:type="saw:physicalCriteria" connectionPool="&quot;X6 - Warranty Claims Data&quot;.&quot;Warranty Claims Connection&quot;"><saw:columns><saw:column columnID="c0" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>CLASSIFICATION</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c1" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>RECORDID</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c2" xsi:type="saw:physicalColumnRef"><saw:displayFormat><saw:formatSpec suppress="suppress" wrapText="true"><saw:dataFormat xsi:type="saw:text" textFormat="html"/></saw:formatSpec></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="html"><saw:text>COMPLAINT_DESCRIPTION</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column></saw:columns><saw:sql>select classification, recordid, ENDECA.MARKUPTEXT(query_string,RECORDID,&#39;DIM_CLAIM_COMMENTS_IDX1&#39;,&#39;&lt;font color=red&gt;&#39;,&#39;&lt;/font&gt;&#39;) COMPLAINT_DESCRIPTION
from endeca.text_classification, endeca.DIM_CLAIM_COMMENTS
where matches(query_string, 
               COMPLAINT_DESCRIPTION)&gt;0
order by classification</saw:sql></saw:criteria><saw:views currentView="0"><saw:view xsi:type="saw:compoundView" name="compoundView!1"><saw:cvTable><saw:cvRow><saw:cvCell viewName="titleView!1" colSpan="2"><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:cvCell></saw:cvRow><saw:cvRow><saw:cvCell viewName="htmlview!1"><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:cvCell><saw:cvCell viewName="pivotTableView!1" rowSpan="2"><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:cvCell></saw:cvRow><saw:cvRow><saw:cvCell viewName="pivotTableView!2"><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:cvCell></saw:cvRow><saw:cvRow><saw:cvCell viewName="tableView!1" colSpan="2"/></saw:cvRow></saw:cvTable></saw:view><saw:view xsi:type="saw:titleView" name="titleView!1" startedDisplay="none" includeName="true"><saw:displayFormat><saw:formatSpec borderColor="#666666" borderPosition="8" wrapText="true"/></saw:displayFormat><saw:title><saw:displayFormat><saw:formatSpec fontFamily="Arial" fontColor="#000000" wrapText="true" fontSize="16" fontStyle="regular"/></saw:displayFormat></saw:title></saw:view><saw:view xsi:type="saw:tableView" name="tableView!1" height="700" rowsPerPage="10"><saw:edges><saw:edge axis="page" showColumnHeader="true"/><saw:edge axis="section"/><saw:edge axis="row" showColumnHeader="true"><saw:columnOrder><saw:columnOrderRef columnID="c0" direction="ascending"/></saw:columnOrder><saw:edgeLayers><saw:edgeLayer type="column" columnID="c0" uiTableName=""/><saw:edgeLayer type="column" columnID="c1" uiTableName=""><saw:headerFormat><saw:displayFormat><saw:formatSpec width="80" wrapText="true"/></saw:displayFormat></saw:headerFormat><saw:memberFormat><saw:displayFormat><saw:formatSpec width="80" wrapText="true"/></saw:displayFormat></saw:memberFormat></saw:edgeLayer><saw:edgeLayer type="column" columnID="c2" uiTableName=""><saw:memberFormat><saw:displayFormat><saw:formatSpec wrapText="true" fontColor="#666666" fontSize="10" width="1000"/></saw:displayFormat></saw:memberFormat><saw:headerFormat><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:headerFormat></saw:edgeLayer></saw:edgeLayers></saw:edge><saw:edge axis="column" showColumnHeader="rollover"/></saw:edges></saw:view><saw:view xsi:type="saw:pivotTableView" name="pivotTableView!1" scrollingEnabled="true" autoPreview="true"><saw:edges><saw:edge axis="page" showColumnHeader="true"/><saw:edge axis="section"/><saw:edge axis="row" showColumnHeader="true"><saw:displayGrandTotals><saw:displayGrandTotal id="gt_row" grandTotalPosition="after"/></saw:displayGrandTotals><saw:edgeLayers><saw:edgeLayer type="column" columnID="c0"><saw:headerFormat><saw:displayFormat><saw:formatSpec wrapText="true" fontStyle="bold" width="150"/></saw:displayFormat><saw:caption><saw:text>Category</saw:text></saw:caption></saw:headerFormat></saw:edgeLayer></saw:edgeLayers></saw:edge><saw:edge axis="column" showColumnHeader="rollover"><saw:edgeLayers><saw:edgeLayer type="measure"/></saw:edgeLayers></saw:edge></saw:edges><saw:measuresList><saw:measure columnID="c1" aggRule="count"><saw:memberFormat><saw:displayFormat><saw:formatSpec fontStyle="bold" wrapText="true"/></saw:displayFormat><saw:caption><saw:text>Count</saw:text></saw:caption></saw:memberFormat><saw:dataBodyFormat><saw:displayFormat><saw:formatSpec hAlign="right" wrapText="true"/></saw:displayFormat></saw:dataBodyFormat></saw:measure></saw:measuresList><saw:nestedViews><saw:nestedView position="right"><saw:view xsi:type="saw:dvtchart" name="pivotTableView!1::GridChart"><saw:display type="bar" subtype="default" renderFormat="default" mode="online"><saw:style barStyle="rectangle" lineStyle="default" scatterStyle="default" fillStyle="default" bubblePercentSize="100" effect="2d"/></saw:display><saw:canvasFormat height="150" width="350"><saw:dataLabels display="always" label="default" position="below" transparentBackground="true" valueAs="default" abbreviation="default"><saw:textFormat fontSize="10"/></saw:dataLabels><saw:title mode="custom"/></saw:canvasFormat><saw:legendFormat position="none" transparentFill="true"/><saw:axesFormats><saw:axisFormat axis="Y1"><saw:title mode="custom"><saw:caption><saw:text># of Claims</saw:text></saw:caption></saw:title></saw:axisFormat><saw:axisFormat axis="X"><saw:title mode="custom"/></saw:axisFormat></saw:axesFormats><saw:seriesFormats><saw:seriesFormatGroup name="bar"><saw:seriesFormatRule><saw:seriesCondition position="1"/><saw:visualFormats><saw:visualFormat color="#9999CC"/></saw:visualFormats></saw:seriesFormatRule></saw:seriesFormatGroup></saw:seriesFormats><saw:selections><saw:categories><saw:category><saw:columnRef columnID="c0"/></saw:category></saw:categories><saw:measures showMeasureLabelsOnCategory="false"><saw:column measureType="y"><saw:columnRef columnID="c1"/></saw:column></saw:measures><saw:seriesGenerators><saw:measureLabels/></saw:seriesGenerators></saw:selections></saw:view></saw:nestedView></saw:nestedViews></saw:view><saw:view xsi:type="saw:htmlview" name="htmlview!1"><saw:staticText><saw:caption fmt="html"><saw:text>&lt;iframe frameborder=&quot;0&quot; scrolling=&quot;no&quot; width=&quot;0&quot; height=&quot;0&quot; src=&quot;saw.dll?Answers&quot; id=&quot;myframe&quot;&gt;&lt;/iframe&gt;

&lt;script&gt;
function refreshReport(idResultsDiv){
	var refreshObj, indexOfId;
alert(&#39;Refreshing Report&#39;);
	refreshObj = document.getElementById(idResultsDiv);
	if(!refreshObj) return;	
	while ( !refreshObj.parentNode.getAttribute(&#39;vid&#39;))       
		refreshObj = refreshObj.parentNode;
	refreshID=refreshObj.parentNode.getAttribute(&#39;vid&#39;);
	indexOfId=refreshID.indexOf(&#39;~v:&#39;);
	if (indexOfId&gt;-1) refreshID = refreshID.substring(0,indexOfId);
	refFunction = &quot;HereLink(&#39;&quot; + refreshID + &quot;&#39;,&#39;Refresh&#39;)&quot;;
	eval(refFunction);
}

function classifytext(){
	var dsqlxml;
	dsqlxml = &quot;&lt;saw:report xmlns:saw=&#39;com.siebel.analytics.web/report/v1.1&#39; xmlns:xsi=&#39;http://www.w3.org/2001/XMLSchema-instance&#39; cacheControl=&#39;bypassCache&#39;&gt;&lt;saw:criteria xsi:type=&#39;saw:physicalCriteria&#39; connectionPool=&#39;\&quot;01 - Sample App Data (ORCL)\&quot;.\&quot;Sample Relational Connection\&quot;&#39;&gt;&lt;saw:sql&gt;alter index ENDECA.TEXT_CLASSIFICATION_IDX1 rebuild&lt;/saw:sql&gt;&lt;/saw:criteria&gt;&lt;/saw:report&gt;&quot;;
	
	var MyIFrame = document.getElementById(&quot;myframe&quot;);
	var MyIFrameDoc = (MyIFrame.contentWindow || MyIFrame.contentDocument);
	if (MyIFrameDoc.document) MyIFrameDoc = MyIFrameDoc.document;
	//MyIFrameDoc.getElementById(&quot;myform&quot;).submit();

	var form = MyIFrameDoc.createElement(&quot;form&quot;);
    form.setAttribute(&quot;method&quot;, &quot;POST&quot;);
    form.setAttribute(&quot;action&quot;, &quot;saw.dll?Answers&quot;);
	var hiddenField = MyIFrameDoc.createElement(&quot;input&quot;);
    hiddenField.setAttribute(&quot;type&quot;, &quot;hidden&quot;);
    hiddenField.setAttribute(&quot;name&quot;, &quot;ReportXML&quot;);
    hiddenField.setAttribute(&quot;value&quot;, dsqlxml);
    form.appendChild(hiddenField);
    MyIFrameDoc.body.appendChild(form);
    form.submit();
    alert (&#39;Recomputing, please wait&#39;);
setTimeout(function(){ refreshReport(&quot;myframe&quot;) }, 10000);
}
&lt;/script&gt;

&lt;button onclick=classifytext();&gt;Classify Complain Texts&lt;/button&gt;</saw:text></saw:caption></saw:staticText></saw:view><saw:view xsi:type="saw:pivotTableView" name="pivotTableView!2" scrollingEnabled="true"><saw:edges><saw:edge axis="page" showColumnHeader="true"/><saw:edge axis="section"/><saw:edge axis="row" showColumnHeader="false"><saw:edgeLayers><saw:edgeLayer type="measure"/></saw:edgeLayers></saw:edge><saw:edge axis="column" showColumnHeader="rollover"><saw:displayGrandTotals><saw:displayGrandTotal id="gt_column" grandTotalPosition="before"/></saw:displayGrandTotals></saw:edge></saw:edges><saw:measuresList><saw:measure columnID="c1" aggRule="countDistinct"><saw:memberFormat><saw:displayFormat><saw:formatSpec wrapText="true"/></saw:displayFormat><saw:caption><saw:text>Total Distinct Claims Selected : </saw:text></saw:caption></saw:memberFormat><saw:dataBodyFormat><saw:displayFormat><saw:formatSpec fontStyle="bold" hAlign="right" wrapText="true"/></saw:displayFormat></saw:dataBodyFormat></saw:measure></saw:measuresList></saw:view></saw:views></saw:report>