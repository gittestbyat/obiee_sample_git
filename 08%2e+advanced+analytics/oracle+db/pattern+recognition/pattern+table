<?xml version="1.0" encoding="utf-8"?>
<saw:report xmlns:saw="com.siebel.analytics.web/report/v1.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlVersion="201201160" xmlns:sawx="com.siebel.analytics.web/expression/v1.1"><saw:criteria xsi:type="saw:physicalCriteria" connectionPool="Atomic Connection"><saw:columns><saw:column columnID="c0" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>CARRIER</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c1" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>FLIGHTNUM</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c2" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>ORIGIN</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c3" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>DEST</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c4" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>MATCH_LENGTH</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c5" xsi:type="saw:physicalColumnRef"><saw:displayFormat><saw:formatSpec suppress="suppress" wrapText="true"><saw:dataFormat xsi:type="saw:custom" customFormat="dd MMMM, yyyy"/></saw:formatSpec></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="html"><saw:text>MATCH_START</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column><saw:column columnID="c6" xsi:type="saw:physicalColumnRef"><saw:displayFormat><saw:formatSpec suppress="suppress" wrapText="true"><saw:dataFormat xsi:type="saw:custom" customFormat="dd MMMM, yyyy"/></saw:formatSpec></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="html"><saw:text>MATCH_END</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column><saw:column columnID="c7" xsi:type="saw:physicalColumnRef" aggRule="none"><saw:columnHeading><saw:caption><saw:text>RANK</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c8" xsi:type="saw:physicalColumnRef" aggRule="none"><saw:columnHeading><saw:caption><saw:text>MATCH</saw:text></saw:caption></saw:columnHeading></saw:column></saw:columns><saw:sql>WITH W1 AS (
  SELECT CARRIER, FLIGHTNUM, ORIGIN, DEST, CNT, START_DATE, LAST_DATE,
  RANK() OVER (ORDER BY CNT DESC) AS RK, Match
  FROM 
  (SELECT CARRIER,FLIGHTDATE,FLIGHTNUM,ORIGIN, DEST,ARRDELAY
   FROM PERFORMANCE 
   WHERE ORIGIN = &#39;@{Origin}{SFO}&#39; AND DEST = &#39;@{Dest}{ORD}&#39;  )
   MATCH_RECOGNIZE (
      PARTITION BY CARRIER,FLIGHTNUM,ORIGIN,DEST
      ORDER BY FLIGHTDATE ASC
      MEASURES
        MATCH_NUMBER() AS MATCH,
        A.FLIGHTDATE  AS START_DATE,
        B.FLIGHTDATE  AS LAST_DATE,
        COUNT(B.*)+1  AS CNT
      ONE ROW PER MATCH 
      AFTER MATCH SKIP PAST LAST ROW 
      PATTERN (A B+) 
      DEFINE B AS B.ARRDELAY &lt; PREV(B.ARRDELAY,1)*@{Factor}{0.95} )
   ORDER BY CNT DESC, START_DATE ASC)
  
SELECT W1.CARRIER, W1.FLIGHTNUM, W1.ORIGIN, W1.DEST, W1.CNT Match_Length, W1.START_DATE Match_Start, W1.LAST_DATE Match_End,  W1.RK Rank, w1.Match
FROM W1 WHERE W1.RK&lt;@{Rank}{4}
ORDER BY Rank,Carrier,Flightnum</saw:sql></saw:criteria><saw:views currentView="7"><saw:view xsi:type="saw:compoundView" name="compoundView!1"><saw:cvTable><saw:cvRow><saw:cvCell viewName="pivotTableView!1"/></saw:cvRow><saw:cvRow><saw:cvCell viewName="htmlview!1"/></saw:cvRow><saw:cvRow><saw:cvCell viewName="tableView!1"><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:cvCell></saw:cvRow></saw:cvTable></saw:view><saw:view xsi:type="saw:titleView" name="titleView!1"/><saw:view xsi:type="saw:tableView" name="tableView!1" scrollingEnabled="true"><saw:edges><saw:edge axis="page" showColumnHeader="true"/><saw:edge axis="section" insertPageBreak="false" showBlankRows="false" showColumnHeader="true"><saw:displayFormat><saw:formatSpec wrapText="true"/></saw:displayFormat><saw:edgeLayers><saw:edgeLayer type="column" columnID="c2" insertPageBreak="false"><saw:headerFormat><saw:displayFormat><saw:formatSpec wrapText="true"/></saw:displayFormat><saw:caption><saw:text>From :</saw:text></saw:caption></saw:headerFormat><saw:memberFormat><saw:displayFormat><saw:formatSpec fontStyle="bold" wrapText="true"/></saw:displayFormat></saw:memberFormat></saw:edgeLayer><saw:edgeLayer type="column" columnID="c3" insertPageBreak="false"><saw:headerFormat><saw:displayFormat><saw:formatSpec wrapText="true"/></saw:displayFormat><saw:caption><saw:text>To : </saw:text></saw:caption></saw:headerFormat><saw:memberFormat><saw:displayFormat><saw:formatSpec fontStyle="bold" wrapText="true"/></saw:displayFormat></saw:memberFormat></saw:edgeLayer></saw:edgeLayers></saw:edge><saw:edge axis="row" showColumnHeader="true"><saw:edgeLayers><saw:edgeLayer type="column" columnID="c0"/><saw:edgeLayer type="column" columnID="c1"/><saw:edgeLayer type="column" columnID="c4"/><saw:edgeLayer type="column" columnID="c5"/><saw:edgeLayer type="column" columnID="c6"/></saw:edgeLayers></saw:edge><saw:edge axis="column" showColumnHeader="rollover"/></saw:edges></saw:view><saw:view xsi:type="saw:dvtchart" name="dvtchart!1" autoPreview="true"><saw:display type="lineTimeSeries" subtype="default" renderFormat="default" mode="online" animateOnDisplay="false"><saw:style barStyle="rectangle" lineStyle="default" scatterStyle="default" fillStyle="default" bubblePercentSize="100" effect="2d"/></saw:display><saw:canvasFormat height="170" width="400"><saw:dataLabels display="default" label="default" position="below" transparentBackground="true" valueAs="default"/><saw:title mode="custom"/></saw:canvasFormat><saw:selections><saw:categories><saw:category><saw:columnRef columnID="c4"/></saw:category><saw:category><saw:columnRef columnID="c7"/></saw:category></saw:categories><saw:measures showMeasureLabelsOnCategory="false"><saw:column measureType="y"><saw:columnRef columnID="c5"/></saw:column><saw:column measureType="y"><saw:columnRef columnID="c9"/></saw:column><saw:column measureType="y"><saw:columnRef columnID="c8"/></saw:column></saw:measures><saw:seriesGenerators><saw:seriesGenerator><saw:columnRef columnID="c6"/></saw:seriesGenerator><saw:measureLabels/></saw:seriesGenerators><saw:page/><saw:sections displayAsSlider="false"><saw:section><saw:columnRef columnID="c0"/></saw:section><saw:section><saw:columnRef columnID="c1"/></saw:section></saw:sections></saw:selections><saw:legendFormat position="none" transparentFill="true"/><saw:axesFormats><saw:axisFormat axis="Y1" displayScaleLabels="true"><saw:title mode="auto"><saw:caption truncate="false" truncateLength="0"/><saw:displayFormat><saw:formatSpec fontSize="10"/></saw:displayFormat></saw:title><saw:labels rotate="0" rotateLabels="false" stagger="false" abbreviation="default" skipLabels="true"/><saw:textFormat fontSize="9"/><saw:scaleMarkers><saw:scaleMarker color="#000000" xsi:type="saw:scaleMarkerLine"><saw:lineWidth><sawx:expr xsi:type="xsd:decimal">1</sawx:expr></saw:lineWidth><saw:linePosition><sawx:expr xsi:type="xsd:decimal">0</sawx:expr></saw:linePosition></saw:scaleMarker></saw:scaleMarkers></saw:axisFormat><saw:axisFormat axis="X" displayScaleLabels="true"><saw:title mode="custom"><saw:caption truncate="false" truncateLength="0"><saw:text/></saw:caption><saw:displayFormat><saw:formatSpec fontSize="8"/></saw:displayFormat></saw:title><saw:labels rotate="0" rotateLabels="false" stagger="false" abbreviation="default" skipLabels="true"/><saw:textFormat fontSize="9"/></saw:axisFormat></saw:axesFormats><saw:seriesFormats><saw:seriesFormatGroup name="lineTimeSeries"><saw:seriesFormatRule><saw:seriesCondition position="1"/><saw:visualFormats><saw:visualFormat color="#999999" lineStyle="dotted" lineWidth="1" symbol="off"/></saw:visualFormats></saw:seriesFormatRule><saw:seriesFormatRule><saw:seriesCondition position="2"/><saw:visualFormats><saw:visualFormat color="#CC3333" lineStyle="default" lineWidth="3" symbol="off"/></saw:visualFormats></saw:seriesFormatRule></saw:seriesFormatGroup></saw:seriesFormats></saw:view><saw:view xsi:type="saw:pivotTableView" name="pivotTableView!1" scrollingEnabled="true"><saw:edges><saw:edge axis="page" showColumnHeader="true"/><saw:edge axis="section" insertPageBreak="false" showBlankRows="false" showColumnHeader="true"><saw:displayFormat><saw:formatSpec wrapText="true"/></saw:displayFormat></saw:edge><saw:edge axis="row" showColumnHeader="false"><saw:edgeLayers><saw:edgeLayer type="measure" uiTableName="Measure Labels"/></saw:edgeLayers></saw:edge><saw:edge axis="column" showColumnHeader="false"/></saw:edges><saw:measuresList><saw:measure columnID="c8" aggRule="count" uiTableName=""><saw:memberFormat><saw:displayFormat><saw:formatSpec wrapText="true"/></saw:displayFormat><saw:caption><saw:text># of Top Matches found for the Pattern : </saw:text></saw:caption></saw:memberFormat><saw:dataBodyFormat><saw:displayFormat><saw:formatSpec fontStyle="bold" wrapText="true"/></saw:displayFormat></saw:dataBodyFormat></saw:measure></saw:measuresList><saw:sectionContent><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:sectionContent></saw:view><saw:view xsi:type="saw:pivotTableView" name="pivotTableView!2" scrollingEnabled="true"><saw:edges><saw:edge axis="page" showColumnHeader="true"/><saw:edge axis="section"/><saw:edge axis="row" showColumnHeader="true"><saw:edgeLayers><saw:edgeLayer type="column" columnID="c3"/><saw:edgeLayer type="column" columnID="c7"/><saw:edgeLayer type="column" columnID="c0"/><saw:edgeLayer type="column" columnID="c1"/><saw:edgeLayer type="column" columnID="c5"/><saw:edgeLayer type="column" columnID="c6"/></saw:edgeLayers></saw:edge><saw:edge axis="column" showColumnHeader="rollover"><saw:edgeLayers><saw:edgeLayer type="column" columnID="c2"/><saw:edgeLayer type="measure"/></saw:edgeLayers></saw:edge></saw:edges><saw:measuresList><saw:measure columnID="c4"/><saw:measure columnID="c8"/></saw:measuresList></saw:view><saw:view xsi:type="saw:narrativeView" name="narrativeView!1"><saw:narrative rowCount="1"><saw:caption fmt="text"><saw:text>@{c1}</saw:text></saw:caption></saw:narrative></saw:view><saw:view xsi:type="saw:htmlview" name="htmlview!1"><saw:staticText><saw:caption fmt="text"><saw:text>The following flight numbers have been identified as the top @{Rank}{4} flights showing[br/] [u]the longest sequences of consecutive flight delay decrease[/u] by factor of x@{Factor}{0.95}</saw:text></saw:caption></saw:staticText></saw:view></saw:views></saw:report>