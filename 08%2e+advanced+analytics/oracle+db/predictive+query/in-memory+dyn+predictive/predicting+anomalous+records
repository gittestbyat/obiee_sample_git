<?xml version="1.0" encoding="utf-8"?>
<saw:report xmlns:saw="com.siebel.analytics.web/report/v1.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlVersion="201201160" xmlns:sawx="com.siebel.analytics.web/expression/v1.1"><saw:criteria xsi:type="saw:physicalCriteria" connectionPool="&quot;X0 - Airlines Demo Dbs (ORCL)&quot;.&quot;Atomic Connection&quot;"><saw:columns><saw:column columnID="c0" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>RANK</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c1" xsi:type="saw:physicalColumnRef"><saw:displayFormat><saw:formatSpec suppress="suppress" wrapText="true"><saw:dataFormat xsi:type="saw:custom" customFormat="dd-MMM-yy"/></saw:formatSpec></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="text"><saw:text>FLIGHTDATE</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column><saw:column columnID="c2" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>DAYOFWEEK</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c3" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>CARRIER</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c4" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>FLIGHT</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c5" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>TAILNUM</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c6" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>ORIGIN</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c7" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>DEST</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c8" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>DEPDELAYMINUTES</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c9" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>ARRDELAYMINUTES</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c10" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>DISTANCE</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c11" xsi:type="saw:physicalColumnRef"><saw:displayFormat><saw:formatSpec suppress="suppress" wrapText="true"/></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="text"><saw:text>CANCELLED</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column><saw:column columnID="c12" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>DIVERTED</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c13" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>TOP_INFLUENCIAL_ATTRS</saw:text></saw:caption></saw:columnHeading></saw:column><saw:column columnID="c14" xsi:type="saw:physicalColumnRef"><saw:columnHeading><saw:caption><saw:text>ATTRIBUTENAME</saw:text></saw:caption></saw:columnHeading></saw:column></saw:columns><saw:sql>SELECT 
  SUBSTR(CAST(RK+100 AS VARCHAR(10)),2,2) AS RANK,FLIGHTDATE,DAYOFWEEK,CARRIER,FLIGHT,TAILNUM,ORIGIN,DEST,DEPDELAYMINUTES,ARRDELAYMINUTES,DISTANCE,CANCELLED,DIVERTED, 
	LISTAGG(ATTR.ATTRIBUTENAME,&#39;, &#39;) WITHIN GROUP (ORDER BY NULL) OVER (PARTITION BY RECID) AS TOP_INFLUENCIAL_ATTRS, ATTR.ATTRIBUTENAME

FROM
  (SELECT *
   FROM
     (SELECT ROWNUM AS RECID,
        FLIGHTDATE,DAYOFWEEK,CARRIER,FLIGHT,TAILNUM,ORIGIN,DEST,DEPDELAYMINUTES,ARRDELAYMINUTES,DISTANCE,CANCELLED,DIVERTED, 
        RANK() OVER (ORDER BY S1.PROBANOM DESC) RK, 
        xmltype(to_clob(S1.ANOM_DET)) xml_data
      FROM
        (SELECT 
          FLIGHTDATE,DAYOFWEEK,CARRIER,CARRIER||&#39; &#39;||FLIGHTNUM AS FLIGHT,TAILNUM,ORIGIN,DEST,DEPDELAYMINUTES,ARRDELAYMINUTES,DISTANCE,CANCELLED,DIVERTED, 
          PREDICTION_PROBABILITY(OF ANOMALY, 0 USING  @{attributes}{YEAR,MONTH,DAYOFWEEK,CARRIER,TAILNUM,ORIGIN,DEST,ARRIVALDELAYGROUPS,DEPARTUREDELAYGROUPS,DISTANCE,CANCELLED,DIVERTED}) OVER () PROBANOM,
          PREDICTION_DETAILS(OF ANOMALY, 0, @{influencers_topn}{5} USING  @{attributes}{YEAR,MONTH,DAYOFWEEK,CARRIER,TAILNUM,ORIGIN,DEST,ARRIVALDELAYGROUPS,DEPARTUREDELAYGROUPS,DISTANCE,CANCELLED,DIVERTED}) OVER () ANOM_DET
        FROM PERFORMANCE F
        WHERE DEST = &#39;@{dest}{BOS}&#39;
        ) S1
      ) 
      WHERE RK&lt;=@{anomaly_topn}{10}
  ) B,  
  XMLTable(&#39;for $i in /Details/Attribute return $i&#39;
    passing xml_data
    columns AttributeName VARCHAR2(100) path &#39;@name&#39;
		)  Attr
ORDER BY RK</saw:sql></saw:criteria><saw:views currentView="0"><saw:view xsi:type="saw:compoundView" name="compoundView!1"><saw:cvTable><saw:cvRow><saw:cvCell viewName="titleView!1" colSpan="2"><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:cvCell></saw:cvRow><saw:cvRow><saw:cvCell viewName="pivotTableView!2"/><saw:cvCell viewName="pivotTableView!3"/></saw:cvRow><saw:cvRow><saw:cvCell viewName="pivotTableView!1" colSpan="2"/></saw:cvRow></saw:cvTable></saw:view><saw:view xsi:type="saw:titleView" name="titleView!1" includeName="false" startedDisplay="none"><saw:title><saw:caption fmt="text"><saw:text>Top @{anomaly_topn}{10} Anomalous Records</saw:text></saw:caption><saw:displayFormat><saw:formatSpec fontFamily="Arial" fontColor="#000000" fontStyle="regular" fontSize="18" wrapText="true"/></saw:displayFormat></saw:title></saw:view><saw:view xsi:type="saw:pivotTableView" name="pivotTableView!1" scrollingEnabled="false" autoPreview="true"><saw:edges><saw:edge axis="page" showColumnHeader="true"/><saw:edge axis="section"/><saw:edge axis="row" showColumnHeader="true"><saw:edgeLayers><saw:edgeLayer type="column" columnID="c0"/><saw:edgeLayer type="column" columnID="c1"/><saw:edgeLayer type="column" columnID="c6"/><saw:edgeLayer type="column" columnID="c10"/><saw:edgeLayer type="column" columnID="c4"/><saw:edgeLayer type="column" columnID="c5"/><saw:edgeLayer type="column" columnID="c2"/><saw:edgeLayer type="column" columnID="c11"/><saw:edgeLayer type="column" columnID="c12"/><saw:edgeLayer type="column" columnID="c13"/></saw:edgeLayers></saw:edge><saw:edge axis="column" showColumnHeader="rollover"><saw:edgeLayers><saw:edgeLayer type="measure"/></saw:edgeLayers></saw:edge></saw:edges><saw:measuresList><saw:measure columnID="c8"/></saw:measuresList></saw:view><saw:view xsi:type="saw:pivotTableView" name="pivotTableView!2" scrollingEnabled="false"><saw:edges><saw:edge axis="page" showColumnHeader="true"/><saw:edge axis="section"/><saw:edge axis="row" showColumnHeader="true"><saw:edgeLayers><saw:edgeLayer type="column" columnID="c3"/></saw:edgeLayers></saw:edge><saw:edge axis="column" showColumnHeader="rollover"><saw:edgeLayers><saw:edgeLayer type="measure"/></saw:edgeLayers></saw:edge></saw:edges><saw:measuresList><saw:measure columnID="c4" aggRule="countDistinct"/></saw:measuresList><saw:nestedViews><saw:nestedView position="chart only"><saw:view xsi:type="saw:dvtchart" name="pivotTableView!2::GridChart"><saw:display type="bar" subtype="default" renderFormat="default" mode="online" animateOnDisplay="false"><saw:style barStyle="rectangle" lineStyle="default" scatterStyle="default" fillStyle="default" bubblePercentSize="100" effect="2d"/></saw:display><saw:canvasFormat height="250" width="400"><saw:dataLabels display="always" label="default" position="below" transparentBackground="true" valueAs="default" abbreviation="default"><saw:textFormat/></saw:dataLabels><saw:title mode="custom"><saw:caption><saw:text>Anomaly Count by Airlines</saw:text></saw:caption></saw:title></saw:canvasFormat><saw:legendFormat position="default" transparentFill="true"/><saw:axesFormats><saw:axisFormat axis="Y1"><saw:title mode="custom"><saw:caption><saw:text># of Flights</saw:text></saw:caption></saw:title></saw:axisFormat><saw:axisFormat axis="X"><saw:title mode="custom"><saw:caption><saw:text>Airlines</saw:text></saw:caption></saw:title></saw:axisFormat></saw:axesFormats><saw:seriesFormats><saw:seriesFormatGroup name="bar"><saw:seriesFormatRule><saw:seriesCondition position="1"/><saw:visualFormats><saw:visualFormat color="#336699"/></saw:visualFormats></saw:seriesFormatRule></saw:seriesFormatGroup></saw:seriesFormats><saw:selections><saw:categories><saw:category><saw:columnRef columnID="c3"/></saw:category></saw:categories><saw:measures showMeasureLabelsOnCategory="false"><saw:column measureType="y"><saw:columnRef columnID="c4"/></saw:column></saw:measures><saw:seriesGenerators><saw:measureLabels/></saw:seriesGenerators></saw:selections></saw:view></saw:nestedView></saw:nestedViews></saw:view><saw:view xsi:type="saw:pivotTableView" name="pivotTableView!3" scrollingEnabled="false"><saw:edges><saw:edge axis="page" showColumnHeader="true"/><saw:edge axis="section"/><saw:edge axis="row" showColumnHeader="true"><saw:columnOrder><saw:columnOrderRef columnID="c14" direction="descending"><saw:QDR><saw:staticMemberGroup specialDimension="measure"><saw:members xsi:type="saw:specialValueMembers"><saw:value>c4</saw:value></saw:members></saw:staticMemberGroup></saw:QDR></saw:columnOrderRef></saw:columnOrder><saw:edgeLayers><saw:edgeLayer type="column" columnID="c14"><saw:memberFormat><saw:displayFormat><saw:formatSpec paddingRight="8" wrapText="true"/></saw:displayFormat></saw:memberFormat></saw:edgeLayer></saw:edgeLayers></saw:edge><saw:edge axis="column" showColumnHeader="rollover"><saw:edgeLayers><saw:edgeLayer type="measure"/></saw:edgeLayers></saw:edge></saw:edges><saw:measuresList><saw:measure columnID="c4" aggRule="count"/></saw:measuresList><saw:nestedViews><saw:nestedView position="chart only"><saw:view xsi:type="saw:dvtchart" name="pivotTableView!3::GridChart"><saw:display type="bar" subtype="horizontal" renderFormat="default" mode="online" animateOnDisplay="false"><saw:style barStyle="rectangle" lineStyle="default" scatterStyle="default" fillStyle="default" bubblePercentSize="100" effect="2d"/></saw:display><saw:canvasFormat height="250" width="400"><saw:dataLabels display="default" label="default" position="below" transparentBackground="true" valueAs="default"/><saw:title mode="custom"><saw:caption><saw:text>Top Influencial Attributes</saw:text></saw:caption></saw:title></saw:canvasFormat><saw:legendFormat position="default" transparentFill="true"/><saw:axesFormats><saw:axisFormat axis="X" displayScaleLabels="true"><saw:title mode="custom"><saw:caption><saw:text>No of predictions influenced</saw:text></saw:caption></saw:title><saw:labels rotate="0" rotateLabels="false" stagger="false" abbreviation="default" skipLabels="true"/><saw:textFormat fontSize="10"/></saw:axisFormat><saw:axisFormat axis="Y1"><saw:title mode="custom"/></saw:axisFormat></saw:axesFormats><saw:seriesFormats><saw:seriesFormatGroup name="bar"><saw:seriesFormatRule><saw:seriesCondition position="1"/><saw:visualFormats><saw:visualFormat color="#663366"/></saw:visualFormats></saw:seriesFormatRule></saw:seriesFormatGroup></saw:seriesFormats><saw:selections><saw:categories><saw:category><saw:columnRef columnID="c14"/></saw:category></saw:categories><saw:measures showMeasureLabelsOnCategory="false"><saw:column measureType="x"><saw:columnRef columnID="c4"/></saw:column></saw:measures><saw:seriesGenerators><saw:measureLabels/></saw:seriesGenerators></saw:selections></saw:view></saw:nestedView></saw:nestedViews></saw:view></saw:views></saw:report>