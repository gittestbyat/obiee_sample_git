<?xml version="1.0" encoding="utf-8"?>
<saw:report xmlns:saw="com.siebel.analytics.web/report/v1.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlVersion="201201160" xmlns:sawx="com.siebel.analytics.web/expression/v1.1"><saw:criteria xsi:type="saw:physicalCriteria" connectionPool="BDSQL Connection Pool"><saw:columns><saw:column columnID="c0" xsi:type="saw:physicalColumnRef"><saw:displayFormat><saw:formatSpec suppress="suppress" wrapText="true" interaction="clientEvent"><saw:clientEventSpec channel="ch1"/></saw:formatSpec></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="text"><saw:text>Customer Name</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column><saw:column columnID="c1" xsi:type="saw:physicalColumnRef"><saw:displayFormat><saw:formatSpec suppress="suppress" wrapText="true"/></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="text"><saw:text>Gender</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column><saw:column columnID="c2" xsi:type="saw:physicalColumnRef"><saw:displayFormat><saw:formatSpec suppress="suppress" wrapText="true"/></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="text"><saw:text>Marital Status</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column><saw:column columnID="c3" xsi:type="saw:physicalColumnRef"><saw:displayFormat><saw:formatSpec suppress="suppress" wrapText="true"/></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="text"><saw:text>Income Level</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column><saw:column columnID="c4" xsi:type="saw:physicalColumnRef"><saw:displayFormat><saw:formatSpec suppress="repeat" wrapText="true"/></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="text"><saw:text>Age</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column><saw:column columnID="c5" xsi:type="saw:physicalColumnRef"><saw:displayFormat><saw:formatSpec suppress="suppress" wrapText="true"/></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="text"><saw:text>Customer ID</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column><saw:column columnID="c6" xsi:type="saw:physicalColumnRef"><saw:displayFormat><saw:formatSpec suppress="suppress" wrapText="true"/></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="text"><saw:text>First Click (tstamp)</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column><saw:column columnID="c7" xsi:type="saw:physicalColumnRef" aggRule="avg"><saw:displayFormat><saw:formatSpec suppress="repeat" wrapText="true"/></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="text"><saw:text>Clicks Count</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column><saw:column columnID="c8" xsi:type="saw:physicalColumnRef"><saw:displayFormat><saw:formatSpec suppress="suppress" wrapText="true"/></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="text"><saw:text>Buy Click (tstamp)</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column><saw:column columnID="c9" xsi:type="saw:physicalColumnRef" aggRule="sum"><saw:displayFormat><saw:formatSpec suppress="repeat" wrapText="true"/></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="text"><saw:text>Buys Count</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column><saw:column columnID="c10" xsi:type="saw:physicalColumnRef"><saw:displayFormat><saw:formatSpec suppress="repeat" wrapText="true"><saw:dataFormat xsi:type="saw:number" minDigits="1" maxDigits="1" commas="false" negativeType="minus"/></saw:formatSpec></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="text"><saw:text>Days before buy</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column><saw:column columnID="c11" xsi:type="saw:physicalColumnRef"><saw:displayFormat><saw:formatSpec suppress="suppress" wrapText="true"/></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="text"><saw:text>Login Flag</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column><saw:column columnID="c12" xsi:type="saw:physicalColumnRef" aggRule="sum"><saw:displayFormat><saw:formatSpec suppress="repeat" wrapText="true"/></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="text"><saw:text>Login Count</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column><saw:column columnID="c13" xsi:type="saw:physicalColumnRef"><saw:displayFormat><saw:formatSpec suppress="repeat" wrapText="true"/></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="text"><saw:text>Clicks LCL (Avg-Stddev)</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column><saw:column columnID="c14" xsi:type="saw:physicalColumnRef"><saw:displayFormat><saw:formatSpec suppress="repeat" wrapText="true"/></saw:displayFormat><saw:tableHeading/><saw:columnHeading><saw:caption fmt="text"><saw:text>Clicks UCL (Avg+Stddev)</saw:text></saw:caption><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:columnHeading></saw:column></saw:columns><saw:sql>SELECT 
C.FULL_NAME, C.GENDER, C.MARITAL_STATUS, C.INCOME_LEVEL, C.AGE,
P.CUST_ID, P.F_CLICK_TSTAMP, P.CLICK_COUNT, P.BUY_TSTAMP, P.BUY_COUNT, 
P.DAYS_SINCE_FCLICK, P.LOGIN_FLAG, P.LOGIN_COUNT, 
P.CLICK_COUNT_LCL, P.CLICK_COUNT_UCL 
FROM ( 
  SELECT
  CUST_ID, F_CLICK_TSTAMP, CLICK_COUNT, BUY_TSTAMP,  BUY_COUNT,
  TRUNC(NO_OF_DAYS_FC,4) AS DAYS_SINCE_FCLICK, LOGIN_FLAG,  LOGIN_COUNT, 
  AVG (CLICK_COUNT) OVER (PARTITION BY 1)-STDDEV (CLICK_COUNT) OVER (PARTITION BY 1) CLICK_COUNT_LCL,
  AVG (CLICK_COUNT) OVER (PARTITION BY 1)+STDDEV (CLICK_COUNT) OVER (PARTITION BY 1) CLICK_COUNT_UCL
  FROM MOVIEDEMO.MOVIEAPP_CLICKS_BDSQL_V  
    MATCH_RECOGNIZE
    (PARTITION BY CUST_ID
    ORDER BY SESS_DATE
    MEASURES
      FIRST(CLICK.ACT_LOGIN) AS LOGIN_FLAG,
      FIRST(CLICK.SESS_DATE) AS F_CLICK_TSTAMP,
      COUNT(CLICK.ACT_LOGIN) AS LOGIN_COUNT,
      COUNT(CLICK.*) AS CLICK_COUNT,    
      FIRST(BUY.SESS_DATE) AS BUY_TSTAMP,
      COUNT(BUY.*) AS BUY_COUNT,
      FIRST(BUY.SESS_DATE)- FIRST(CLICK.SESS_DATE) AS NO_OF_DAYS_FC
  ONE ROW PER MATCH
  PATTERN (CLICK+ BUY+)
  DEFINE CLICK AS (ACT_PURCHASE IS NULL),
  BUY AS (ACT_PURCHASE IS NOT NULL)) 
  ) P, MOVIEDEMO.CUSTOMER C
WHERE P.CUST_ID = C.CUST_ID 
ORDER BY P.CUST_ID,F_CLICK_TSTAMP
</saw:sql></saw:criteria><saw:views currentView="0"><saw:view xsi:type="saw:compoundView" name="compoundView!1"><saw:cvTable><saw:cvRow><saw:cvCell viewName="titleView!1" colSpan="2"/></saw:cvRow><saw:cvRow><saw:cvCell viewName="htmlview!3"><saw:displayFormat><saw:formatSpec hAlign="left"/></saw:displayFormat></saw:cvCell><saw:cvCell viewName="dvtchart!1"/></saw:cvRow><saw:cvRow><saw:cvCell viewName="htmlview!1"><saw:displayFormat><saw:formatSpec hAlign="left"/></saw:displayFormat></saw:cvCell><saw:cvCell viewName="htmlview!2"><saw:displayFormat><saw:formatSpec hAlign="left"/></saw:displayFormat></saw:cvCell></saw:cvRow><saw:cvRow><saw:cvCell viewName="tableView!1"/><saw:cvCell viewName="tableView!2"/></saw:cvRow></saw:cvTable></saw:view><saw:view xsi:type="saw:titleView" name="titleView!1" includeName="true" startedDisplay="none"><saw:title><saw:displayFormat><saw:formatSpec fontFamily="Arial" fontSize="16" wrapText="true"/></saw:displayFormat></saw:title></saw:view><saw:view xsi:type="saw:tableView" name="tableView!1" scrollingEnabled="false" clientEventChannels="ch1" clientEventEnabled="true"><saw:edges><saw:edge axis="page" showColumnHeader="true"><saw:edgeLayers><saw:edgeLayer type="column" columnID="c0" visibility="visible"><saw:headerFormat><saw:displayFormat><saw:formatSpec wrapText="true"/></saw:displayFormat></saw:headerFormat></saw:edgeLayer></saw:edgeLayers></saw:edge><saw:edge axis="section"><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:edge><saw:edge axis="row" showColumnHeader="true"><saw:edgeLayers><saw:edgeLayer type="column" columnID="c6"/><saw:edgeLayer type="column" columnID="c10"/><saw:edgeLayer type="column" columnID="c7"/><saw:edgeLayer type="column" columnID="c8"/><saw:edgeLayer type="column" columnID="c9"/><saw:edgeLayer type="column" columnID="c11"/><saw:edgeLayer type="column" columnID="c12"/></saw:edgeLayers></saw:edge><saw:edge axis="column" showColumnHeader="rollover"/></saw:edges><saw:pageEdgeState><saw:QDR><saw:staticMemberGroup><saw:groupType><sawx:columnRefExpr columnID="c0"/></saw:groupType><saw:members xsi:type="saw:stringMembers"><saw:value>Elise Cole</saw:value></saw:members></saw:staticMemberGroup></saw:QDR><saw:selectionGroups><saw:selectionGroup columnID="c0" groupID="0"/></saw:selectionGroups></saw:pageEdgeState></saw:view><saw:view xsi:type="saw:dvtchart" name="dvtchart!1" autoPreview="true"><saw:display type="scatter" subtype="default" renderFormat="default" mode="online" animateOnDisplay="false"><saw:style barStyle="default" lineStyle="default" scatterStyle="default" fillStyle="default" bubblePercentSize="100" effect="2d"/></saw:display><saw:canvasFormat height="350" width="600"><saw:dataLabels display="default" label="default" position="below" transparentBackground="true" valueAs="default"/><saw:title mode="custom"><saw:caption truncate="false" truncateLength="0"><saw:text>Avg Clicks Count before Buying - by Customer</saw:text></saw:caption><saw:displayFormat><saw:formatSpec fontFamily="Arial" fontSize="13" fontStyle="bold" fontColor="#999999"/></saw:displayFormat></saw:title></saw:canvasFormat><saw:selections><saw:categories><saw:category><saw:columnRef columnID="c5"/></saw:category><saw:category><saw:columnRef columnID="c0"/></saw:category></saw:categories><saw:measures showMeasureLabelsOnCategory="false"><saw:column measureType="y"><saw:columnRef columnID="c7"/></saw:column><saw:column measureType="x"><saw:columnRef columnID="c4"/></saw:column></saw:measures><saw:seriesGenerators><saw:measureLabels/></saw:seriesGenerators><saw:page/></saw:selections><saw:legendFormat position="none" transparentFill="true"><saw:textFormat/></saw:legendFormat><saw:axesFormats><saw:axisFormat axis="X"><saw:scale scaleValues="custom" min="15" max="80" defaultTicks="true"/><saw:scaleMarkers/><saw:title mode="custom"><saw:caption><saw:text>Customer Age</saw:text></saw:caption></saw:title></saw:axisFormat><saw:axisFormat axis="Y1"><saw:scaleMarkers><saw:scaleMarker color="#E2F0FE" xsi:type="saw:scaleMarkerRange"><saw:markerLabel><saw:title mode="custom"><saw:caption><saw:text>AVG +/- STDDEV</saw:text></saw:caption></saw:title></saw:markerLabel><saw:rangeLow><saw:columnRef columnID="c13"/></saw:rangeLow><saw:rangeHigh><saw:columnRef columnID="c14"/></saw:rangeHigh></saw:scaleMarker></saw:scaleMarkers><saw:title mode="custom"><saw:caption><saw:text>Avg Clicks Count before Buying</saw:text></saw:caption></saw:title></saw:axisFormat></saw:axesFormats><saw:seriesFormats><saw:seriesFormatGroup name="scatter"><saw:seriesFormatRule><saw:seriesCondition position="1"/><saw:visualFormats><saw:visualFormat color="#2A91F8" symbol="round" symbolColor="#2A91F8"/></saw:visualFormats></saw:seriesFormatRule></saw:seriesFormatGroup></saw:seriesFormats></saw:view><saw:view xsi:type="saw:tableView" name="tableView!2" scrollingEnabled="false" clientEventChannels="ch1" clientEventEnabled="true"><saw:edges><saw:edge axis="page" showColumnHeader="true"><saw:edgeLayers><saw:edgeLayer type="column" columnID="c0" visibility="visible"/></saw:edgeLayers></saw:edge><saw:edge axis="section"/><saw:edge axis="row" showColumnHeader="true"><saw:edgeLayers><saw:edgeLayer type="column" columnID="c5"/><saw:edgeLayer type="column" columnID="c0" visibility="visible" duplicateID="d1"/><saw:edgeLayer type="column" columnID="c1"/><saw:edgeLayer type="column" columnID="c2"/><saw:edgeLayer type="column" columnID="c3"/><saw:edgeLayer type="column" columnID="c4"/><saw:edgeLayer type="column" columnID="c12"/><saw:edgeLayer type="column" columnID="c9"/><saw:edgeLayer type="column" columnID="c7"><saw:headerFormat><saw:displayFormat><saw:formatSpec wrapText="true" fontStyle="bold"/></saw:displayFormat><saw:caption><saw:text>Avg Clicks to Buy</saw:text></saw:caption></saw:headerFormat><saw:memberFormat><saw:displayFormat><saw:formatSpec fontStyle="bold" wrapText="true" backgroundColor="#99CCFF"/></saw:displayFormat></saw:memberFormat></saw:edgeLayer></saw:edgeLayers></saw:edge><saw:edge axis="column" showColumnHeader="rollover"/></saw:edges><saw:pageEdgeState><saw:QDR><saw:staticMemberGroup><saw:groupType><sawx:columnRefExpr columnID="c0"/></saw:groupType><saw:members xsi:type="saw:stringMembers"><saw:value>Elise Cole</saw:value></saw:members></saw:staticMemberGroup></saw:QDR><saw:selectionGroups><saw:selectionGroup columnID="c0" groupID="0"/></saw:selectionGroups></saw:pageEdgeState><saw:sectionContent><saw:displayFormat><saw:formatSpec/></saw:displayFormat></saw:sectionContent></saw:view><saw:view xsi:type="saw:htmlview" name="htmlview!1"><saw:staticText><saw:caption fmt="text"><saw:text>Click patterns leading upto one or more purchases</saw:text></saw:caption></saw:staticText><saw:displayFormat><saw:formatSpec fontFamily="Arial" fontSize="14" fontStyle="bold"/></saw:displayFormat></saw:view><saw:view xsi:type="saw:htmlview" name="htmlview!2"><saw:staticText><saw:caption fmt="text"><saw:text>[b]Selected Customer Details [/b](select customer from above graph)</saw:text></saw:caption></saw:staticText><saw:displayFormat><saw:formatSpec fontFamily="Arial" fontSize="14" fontStyle="regular"/></saw:displayFormat></saw:view><saw:view xsi:type="saw:htmlview" name="htmlview!3"><saw:staticText><saw:caption fmt="html"><saw:text>[b]Pattern detection SQL to identify clicks leading upto one or more purchases[/b]
&lt;pre&gt;
  SELECT
  CUST_ID, F_CLICK_TSTAMP, CLICK_COUNT, BUY_TSTAMP,  BUY_COUNT,
  TRUNC(NO_OF_DAYS_FC,4) AS DAYS_SINCE_FCLICK, LOGIN_FLAG, LOGIN_COUNT
  FROM MOVIEDEMO.MOVIEAPP_CLICKS_BDSQL_V  
    MATCH_RECOGNIZE
    (PARTITION BY CUST_ID
    ORDER BY SESS_DATE
    MEASURES
      FIRST(CLICK.ACT_LOGIN) AS LOGIN_FLAG,
      FIRST(CLICK.SESS_DATE) AS F_CLICK_TSTAMP,
      COUNT(CLICK.ACT_LOGIN) AS LOGIN_COUNT,
      COUNT(CLICK.*) AS CLICK_COUNT,    
      FIRST(BUY.SESS_DATE) AS BUY_TSTAMP,
      COUNT(BUY.*) AS BUY_COUNT,
      FIRST(BUY.SESS_DATE)- FIRST(CLICK.SESS_DATE) AS NO_OF_DAYS_FC
  [b]ONE ROW PER MATCH
  PATTERN (CLICK+ BUY+)
  DEFINE CLICK AS (ACT_PURCHASE IS NULL),
  BUY AS (ACT_PURCHASE IS NOT NULL)) [/b]
&lt;/pre&gt;</saw:text></saw:caption></saw:staticText><saw:displayFormat><saw:formatSpec fontFamily="Courier New" fontSize="12"/></saw:displayFormat></saw:view></saw:views></saw:report>